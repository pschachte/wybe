def {noinline} leq_2(x:int) use !io {
    !println(case x in {
        0    :: 1
      | 1    :: 1
      | 2    :: 1
      | else :: 9
    })
}

def {noinline} defaulty(x:int) use !io {
    !println(case x in {
        0    :: 0
      | 1    :: 1
      | 2    :: 2
      | else :: 99
    })
}

def {noinline} not_dense(x:int) use !io {
    !println(case x in {
        0    :: 0
      | 2    :: 1
      | else :: 9
    })
}
def {noinline} not_dense_but_similar(x:int) use !io {
    !println(case x in {
        0    :: 0
      | 2    :: 0
      | else :: 0
    })
}

def {noinline} nested(b:bool, x:int) use !io {
  if {
    b ::
    !print(b)
    !println(case x in {
        0    :: 1
      | 1    :: 1
      | 2    :: 1
      | else :: 9
    })
  | else ::
    !print(b)
    !println(case x in {
        0    :: 1
      | 1    :: 1
      | 2    :: 1
      | else :: 9
    })
  }
}
def {noinline} nested_same_default(b:bool, x:int) use !io {
  if {
    b ::
    !print("$b ")
    !println(case x in {
        0    :: 1
      | 2    :: 1
      | else :: 9
    })
  | else ::
    !print("$b ")
    !println(case x in {
        0    :: 1
      | 3    :: 1
      | else :: 9
    })
  }
}
def {noinline} nested_different_default(b:bool, x:int) use !io {
  if {
    b ::
    !print("$b ")
    !println(case x in {
        0    :: 1
      | 2    :: 1
      | else :: 9
    })
  | else ::
    !print("$b ")
    !println(case x in {
        0    :: 1
      | 3    :: 1
      | else :: 8
    })
  }
}
def {noinline} nested_disjoint_same_default(b:bool, x:int) use !io {
  if {
    b ::
    !print("$b ")
    !println(case x in {
        0    :: 1
      | 4    :: 4
      | 2    :: 2
      | else :: 3
    })
  | else ::
    !print("$b ")
    !println(case x in {
        0    :: 1
      | 4    :: 4
      | 3    :: 3
      | else :: 2
    })
  }
}

!nested_same_default(true, 0)
!nested_same_default(true, 1)
!nested_same_default(true, 2)
!nested_same_default(true, 3)
!nested_same_default(false, 0)
!nested_same_default(false, 1)
!nested_same_default(false, 2)
!nested_same_default(false, 3)

